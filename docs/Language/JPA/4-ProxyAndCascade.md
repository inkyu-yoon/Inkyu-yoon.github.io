---
layout: post
title: "Â· JPA í”„ë¡ì‹œì™€ ì˜ì†ì„± ì „ì´"
nav_order: 4
parent : JPA
grand_parent: ğŸ‘©ğŸ»â€ğŸ’»Language
permalink: docs/Language/JPA/ProxyAndCascade
---

# JPA í”„ë¡ì‹œì™€ ì˜ì†ì„± ì „ì´
{: .no_toc }

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## í”„ë¡ì‹œ

<br>

### JPAì˜ ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ ë©”ì»¤ë‹ˆì¦˜ (ì¿¼ë¦¬ ì‹¤í–‰ ì¡°ê±´)

---

JPAê°€ ë°ì´í„°ë² ì´ìŠ¤ì— ìˆëŠ” í…Œì´ë¸”ì— ì ‘ê·¼í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•´ë³´ê² ë‹¤.

ê°ì²´ ê°„(ë°ì´í„°ë² ì´ìŠ¤ ìƒ í…Œì´ë¸” ê°„) ì—°ê´€ ê´€ê³„ê°€ ë˜ì–´ ìˆì„ ë•Œ,

ì—°ê´€ë˜ì–´ ìˆëŠ” ê°ì²´ì˜ ì •ë³´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ìƒ ì—°ê´€ëœ ê°ì²´(í…Œì´ë¸”)ì— ëŒ€í•´ì„œëŠ” ì¿¼ë¦¬ë¥¼ ì‹¤í–‰ì‹œí‚¤ì§€ ì•Šê³  ì„ì‹œ ê°ì²´ ìƒíƒœë¡œì„œ ë³´ê´€í•˜ê³  ìˆê³ , ì´ ê°€ì§œ ê°ì²´ ìƒíƒœë¥¼ **í”„ë¡ì‹œ**ë¼ê³  í•œë‹¤.

í”„ë¡ì‹œê°€ ì‚¬ìš©ìì˜ ìš”ì²­ì— ì˜í•´ì„œ, ì§„ì§œ ê°ì²´ ë°ì´í„°ë¡œ ì±„ì›Œì§€ë©´ ì—”í‹°í‹° ê°ì²´ë¡œ ì™„ì „íˆ ë°”ë€ŒëŠ” ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— **íƒ€ì… ì²´í¬ì‹œ `==` ì´ ì•„ë‹Œ `instance of` ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤!!**

<br>

{: .important}

> ì˜ˆë¥¼ ë“¤ì–´, **Member** í…Œì´ë¸”ê³¼ **Team** í…Œì´ë¸”ì´ ì„œë¡œ ì—°ê´€ë˜ì–´ ìˆê³ , **Member** í´ë˜ìŠ¤ ì•ˆì— `team` ì´ë¼ëŠ” ë³€ìˆ˜ëª…ìœ¼ë¡œ **Team**ê³¼ ë§¤í•‘ë˜ì–´ ìˆì„ ë•Œ,
>
> ì—°ê´€ë˜ì–´ ìˆëŠ” ë‹¤ë¥¸ ê°ì²´ë¥¼ í”„ë¡ì‹œë¡œ ê°€ì ¸ì˜¤ê³  ì‹¶ë‹¤ë©´ `@XToOne(fetch = FetchType.LAZY)` ì°¸ì¡°ëœ ê°ì²´ì— ì–´ë…¸í…Œì´ì…˜ ì„¤ì •ì„ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•œë‹¤.
>
> `XToMany` ëŠ” ë””í´íŠ¸ ì„¤ì •ì´ LAZYë¼ì„œ ëª…ì‹œí•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
>
> ì´ë¥¼ ì§€ì—°ë¡œë”© ì„¤ì •ì´ë¼ê³  í•˜ê³ , ì§€ì—° ë¡œë”© ì„¤ì •ì„ í•˜ê²Œ ë˜ë©´
>
> **Member** ì˜ **Team**ê³¼ ì—°ê´€ë˜ì–´ìˆì§€ ì•Šì€ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í• ë•ŒëŠ”, ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ **Member** í…Œì´ë¸”ì—ë§Œ ì ‘ê·¼ì„ í•˜ê³ ,
>
> **Member** ê°€ ê°€ì§„ `team` ê°ì²´ì˜ ì™¸ë˜í‚¤ê°€ ì•„ë‹Œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ë ¤ê³  í• ë•Œ, ê·¸ì œì„œì•¼ ë°ì´í„°ë² ì´ìŠ¤ì˜ **Team** í…Œì´ë¸”ì— ì ‘ê·¼í•˜ê³  í”„ë¡ì‹œì— ë°ì´í„°ë¥¼ ì±„ìš´ë‹¤.
>
> ì¿¼ë¦¬ë¬¸ ì‹¤í–‰ì„ ìµœì†Œí™” ì‹œí‚¤ë ¤ëŠ” ì‹œìŠ¤í…œì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.

<br>



## ì˜ì†ì„± ì „ì´

<br>

- ì—°ê´€ëœ ê°ì²´ë¥¼ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©

```
	  // êµ¬ë¬¸
        Child child1 = new Child();
        child1.setChildName("son");
        child1.setChileAge("1");

        Child child2 = new Child();
        child2.setChildName("daughter");
        child2.setChileAge("2");

        Parent parent = new Parent();
        child1.addParent(parent);
        child2.addParent(parent);

        em.persist(child1);
        em.persist(child2);

        em.flush();
        em.clear();
        
        //Child í´ë˜ìŠ¤ì˜ ì—°ê´€ê´€ê³„ ë©”ì„œë“œ
        
        public void addParent(Parent parent) {
        this.parent = parent;
        parent.getChilds().add(this);
    	}
```

ìœ„ì™€ ê°™ì€ êµ¬ë¬¸ì´ ìˆë‹¤ê³  ê°€ì •í•´ë³´ì.

ì˜ì†ì„± ì „ì´ ì„¤ì •`(cascade = CascadeType.ALL)` ì´ ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.

ì™œëƒí•˜ë©´, `child1`, `child2` ê°ì²´ë§Œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¡œ persist ë˜ì—ˆê³  `parent` ëŠ” persist ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì—,

DBì—ì„œ child ê´€ë ¨ ì¿¼ë¦¬ë¬¸ë§Œ ì‹¤í–‰ë˜ê³ , ê²°êµ­ì—” parent í…Œì´ë¸” ì™¸ë˜í‚¤ ê°’ì´ nullì´ ë˜ë©´ì„œ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.

**ë”°ë¼ì„œ, em.persist(parent) í•´ì£¼ë˜ê°€ ì˜ì†ì„± ì „ì´ ì„¤ì •(`(cascade = CascadeType.ALL)` )ì„ í•´ì£¼ì–´ì•¼ í•œë‹¤.**